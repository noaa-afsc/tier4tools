% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/spr_inputs.R
\name{spr_input}
\alias{spr_input}
\title{Construct SPR input objec
t}
\usage{
spr_input(
  ages,
  species,
  rec_prop = NULL,
  R0 = 1,
  use_plus_group = TRUE,
  scale_selex = TRUE
)
}
\arguments{
\item{ages}{Numeric vector of ages (e.g., \code{a_min:a_max}).}

\item{species}{A named or unnamed list for single species specification, or a
named list of species for multispecies specifications. See details.}

\item{rec_prop}{Optional numeric vector of recruitment proportions for multispecies analyses.
Must be the same length as the number of species and sum to 1. Defaults to equal proportions.}

\item{R0}{Numeric scalar recruitment scaling used for per-recruit
calculations (default=1, or equal proportions if inputting multiple
species). If defining R0 for multiple species, R0 proportions must be a
vector equal to the number of species and sum to 1.}

\item{use_plus_group}{Logical. If \code{TRUE} (default), the terminal age will be treated as a plus group in pop dy equations.}

\item{scale_selex}{Logical. If \code{TRUE} (default), scales selectivity so max equals 1 when possible.}
}
\value{
A named list with expanded, validated inputs for running SPR functions:
\itemize{
\item \code{ages}, \code{R0}, \code{use_plus_group}
\item \code{species}: named list of per-species expanded vectors and original specifications
\item \code{rec_prop}: recruitment proportions used for multispecies calculations
}
}
\description{
Validates and expand inputs needed for per-recruit SPR/YPR calculations for
one or multiple species. If \code{selectivity$type = "fleets"},
fleet-specific selectivity curves are combined into an effective
selectivity-at-age vector using a \code{propF}-weighted mean. The per-recruit
calculations use this effective selectivity. Fleet details may be retained in
the output for transparency and plotting, but are not required for SPR/YPR
calculations.
}
\details{
For a single-species analysis, provide a single species specification via
\code{species} (can be named or unnamed). For multispecies analyses, provide a
named list of species specifications, where each element defines life history
and fishery inputs for one species.

Each species specification must include:
\itemize{
\item \code{len_at_age}: list with \code{type="vb"} (Linf, k, t0) or \code{type="vector"} (L).
\item \code{wt_at_age}: list with \code{type="wl"} (alpha, beta) or \code{type="vector"} (W).
\item \code{maturity}: list with \code{type="logistic"} (a50, delta) or \code{type="vector"} (m).
\item \code{selectivity}: list with \code{type="logistic"} (a50, delta),
\code{type="knife_edge"} (a_c), \code{type="vector"} (s), or
\code{type="fleets"} (multiple fleet selectivities). For
\code{type="fleets"}, provide \code{fleets = list(<fleetname> = list(propF
  = <weight>, selex = <selectivity_spec>), ...)}.
\item \code{M}: numeric scalar or vector of length \code{length(ages)}.
}

Rules for size-at-age:
\itemize{
\item If \code{wt_at_age$type = "vector"}, the provided weight-at-age vector is used directly in the SPR model.
In this case, \code{len_at_age} is not used to determine size-at-age for the SPR calculations, and a message
is emitted to make this explicit.
\item If \code{len_at_age$type = "vb"}, then \code{wt_at_age$type} must be \code{"wl"} to ensure consistency
between growth and weight conversion.
}
}
\examples{
\dontrun{
ages <- 3:52

# single species example
inp1 <- spr_input(
  ages = ages,
  species = list(
  BS = list(
    len_at_age   = list(type="vb", Linf=52.6, k=0.062, t0=0.2),
    wt_at_age    = list(type="wl", alpha=8.13e-6, beta=3.177),
    maturity     = list(type="logistic", a50=20, delta=-2),
    selectivity  = list(type="knife_edge", a_c=10),
    M = 0.042
    )
)

# single species example with two fleets
inp_fleets <- spr_input(
  ages = ages,
  species = list(
    BS = list(
      len_at_age   = list(type="vb", Linf=52.6, k=0.062, t0=0.2),
      wt_at_age    = list(type="wl", alpha=8.13e-6, beta=3.177),
      maturity     = list(type="logistic", a50=20, delta=-2),
      selectivity  = list(
        type = "fleets",
        fleets = list(
          trawl    = list(propF = 0.7, selex = list(type="logistic", a50=9, delta=-1.5)),
          longline = list(propF = 0.3, selex = list(type="knife_edge", a_c=12))
        )
      ),
      M = 0.042
    )
  )
)

# multispecies example
inp2 <- spr_input(
  ages = ages,
  species = list(
    RE = list(
      len_at_age  = list(type="vb", Linf=54.4, k=0.102, t0=-0.36),
      wt_at_age   = list(type="wl", alpha=1.143e-5, beta=3.098),
      maturity    = list(type="vector", m=rep(0, length(ages))), # placeholder
      selectivity = list(type="vector", s=rep(1, length(ages))),
      M = 0.042
    ),
    BS = list(
      len_at_age  = list(type="vb", Linf=52.6, k=0.062, t0=0.2),
      wt_at_age   = list(type="wl", alpha=8.13e-6, beta=3.177),
      maturity    = list(type="vector", m=rep(0, length(ages))), # placeholder
      selectivity = list(type="vector", s=rep(1, length(ages))),
      M = 0.042
    )
  ),
  rec_prop = c(RE=0.5, BS=0.5)
)
}
}
