[{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"background-and-objectives","dir":"Articles","previous_headings":"","what":"Background and objectives","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"vignette demonstrates multispecies Tier 4 workflow using Gulf Alaska rougheye blackspotted (RE/BS) rockfish complex case study. objective show multispecies Tier 4 methods informative, implemented tier4tools, results uncertainty can communicated using standardized, SAFE-ready figures. Emphasis placed interpretation, rather reproducing similar plots multiple parameterizations.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"why-a-multispecies-tier-4-case-study-for-rebs","dir":"Articles","previous_headings":"Background and objectives","what":"Why a multispecies Tier 4 case study for RE/BS","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"Since 2008, RE/BS complex assessed using Tier 3 statistical catch--age model combines rougheye blackspotted rockfish single assessment unit shared growth, maturity, biological processes. Persistent challenges, including model scaling, data fits, retrospective patterns, need reconcile two species’ distinct life histories, highlighted limitations combined approach. Conservation concerns increased recent years complex-level survey biomass declined, particularly blackspotted rockfish, species slower growth later maturation expected less resilient fishing pressure. single-species Tier 4 approach require reliable, species-specific biomass abundance indices support catch allocation scaling. practice, species separation survey time series limited, field identifications known imperfect based genetic validation studies. constraints, multispecies Tier 4 per recruit model provides transparent alternative exploring differences life history uncertainty recruitment composition affect spawning potential ratio (SPR) reference points implied yield-per-recruit (YPR) species.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"what-is-being-varied-in-this-vignette","dir":"Articles","previous_headings":"Background and objectives","what":"What is being varied in this vignette","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"vignette focuses two sources uncertainty specific multispecies Tier 4 applications: Definition multispecies reference points Two alternative approaches evaluated. Unconstrained total curve: complex-level SPR curve computed summing species-specific SBPR across species, fishing mortality FF corresponding target SPR identified combined curve. Constrained approach (species must meet target): reference FF defined maximum FF species meets target SPR, combined curve also satisfies target. approaches can yield different reference points species differ substantially productivity. Recruitment proportions (R0 proportions) Recruitment proportions determine species contributes total spawning biomass per recruit (SBPR) total YPR multispecies complex. recruitment composition uncertain RE/BS complex, sensitivity analyses conducted across range assumed proportions. sensitivity implemented two-species complexes tier4tools. analysis defined proportion assigned first species, second species receiving remainder.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"life-history-and-fishery-inputs","dir":"Articles","previous_headings":"","what":"Life history and fishery inputs","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"RE/BS case study uses ages 3 52, plus group age 52 species. Growth represented using von Bertalanffy length--age models weight–length relationships estimated fisheries-independent, genetically verified data. Maturity modeled using species-specific functional maturity schedules account skipped spawning. Fishery selectivity based recent Tier 3 statistical catch--age assessment assumed identical species. Selectivity therefore represented fixed selectivity--age vector applied consistently across species.","code":"ages <- 3:52 use_plus_group <- TRUE  # Recruitment proportions, base case is 50/50 rec_prop <- c(RE = 0.5, BS = 0.5)  # Natural mortality (assumed identical for both species) M_val <- 0.042  # Functional maturity-at-age vectors (ages 3-52) maturity_RE <- c(   0.004, 0.003, 0.003, 0.003, 0.003, 0.004, 0.005, 0.009, 0.017, 0.037,   0.085, 0.175, 0.297, 0.412, 0.503, 0.569, 0.616, 0.649, 0.672, 0.688,   0.699, 0.705, 0.708, 0.708, 0.707, 0.705, 0.702, 0.698, 0.693, 0.688,   0.683, 0.677, 0.671, 0.664, 0.658, 0.651, 0.644, 0.637, 0.630, 0.622,   0.615, 0.607, 0.599, 0.591, 0.583, 0.575, 0.567, 0.559, 0.551, 0.543 )  maturity_BS <- c(   0.013, 0.013, 0.013, 0.013, 0.014, 0.014, 0.016, 0.018, 0.021, 0.024,   0.030, 0.037, 0.045, 0.054, 0.066, 0.079, 0.093, 0.108, 0.124, 0.139,   0.154, 0.169, 0.182, 0.195, 0.208, 0.220, 0.232, 0.243, 0.255, 0.266,   0.276, 0.286, 0.294, 0.302, 0.308, 0.314, 0.319, 0.323, 0.327, 0.331,   0.334, 0.338, 0.341, 0.345, 0.349, 0.353, 0.358, 0.364, 0.370, 0.370 )  # Shared selectivity-at-age vector (ages 3-52) selex_shared <- c(   0.001, 0.001, 0.003, 0.007, 0.014, 0.028, 0.048, 0.066, 0.064,   0.057, 0.052, 0.076, 0.203,   rep(1, length(ages) - 13) )  # Growth (von Bertalanffy parameters in cm) vb_RE <- list(type = \"vb\", Linf = 54.4, t0 = -0.36, k = 0.102) vb_BS <- list(type = \"vb\", Linf = 52.6, t0 =  0.20, k = 0.062)  # Weight-length parameters (W = alpha * L^beta) wl_RE <- list(type = \"wl\", alpha = 1.14e-5, beta = 3.098) wl_BS <- list(type = \"wl\", alpha = 8.13e-6, beta = 3.177)"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"build-the-multispecies-spr_input-object","dir":"Articles","previous_headings":"Life history and fishery inputs","what":"Build the multispecies spr_input() object","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"spr_input() stores life history schedules required per recruit model. multispecies inputs, object contains species list one element per species. Note: two species example, recruitment proportion sensitivities typically implemented storing baseline recruitment scaling R0_base species rescaling R0 inside spr_sensitivity(). vignette, treat R0 recruitment scaling inside spr_input() vary scalings sensitivity function","code":"inp <- spr_input(   ages = ages,   species = list(     RE = list(       len_at_age = vb_RE,       wt_at_age = wl_RE,       maturity = list(type = \"vector\", m = maturity_RE),       selectivity = list(type = \"vector\", s = selex_shared),       M = M_val     ),     BS = list(       len_at_age = vb_BS,       wt_at_age = wl_BS,       maturity = list(type = \"vector\", m = maturity_BS),       selectivity = list(type = \"vector\", s = selex_shared),       M = M_val     )   ),   rec_prop = c(RE = 0.5, BS = 0.5),   use_plus_group = TRUE )"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"check-inputs-before-running-reference-points","dir":"Articles","previous_headings":"","what":"Check inputs before running reference points","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"Per recruit calculations good implied schedules. running reference points, useful confirm maturity, selectivity, growth, MM align intended assumptions.  example, maturity selectivity panel particularly important. Selectivity shared, maturity differs strongly species.","code":"inp_plots <- plot_spr_inputs(   inp,   panels = c(\"mat_selex\", \"wt\", \"len\", \"M\"),   overlay_maturity_selex = TRUE ) #> Scale for colour is already present. #> Adding another scale for colour, which will replace the existing scale. #> Scale for colour is already present. #> Adding another scale for colour, which will replace the existing scale. #> Scale for colour is already present. #> Adding another scale for colour, which will replace the existing scale. #> Scale for colour is already present. #> Adding another scale for colour, which will replace the existing scale.  # inp_plots$mat_selex # inp_plots$wt # inp_plots$len # inp_plots$M  # select a group of plots using optional helper function that relies on # the \"patchwork\" R library grid_spr_inputs(inp_plots, order = c(\"mat_selex\", \"wt\",\"len\",\"M\"), ncol = 2, guides = \"keep\")"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"run-per-recruit-spr-and-ypr-calculations","dir":"Articles","previous_headings":"","what":"Run per recruit SPR and YPR calculations","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"run model two modes: Unconstrained (multispecies_constraint = \"none\"), combined reference points based complex-level SPR curve. Constrained (multispecies_constraint = \"all_species\"), combined reference points set ensure every species meets target SPR therefore “constrained” limiting (.e. lower productivity) species.","code":"spr_uncon <- run_spr(   inp,   spr_targets = c(0.40, 0.35),    multispecies_constraint = \"none\",   diagnostics = TRUE )  spr_con <- run_spr(   inp,   spr_targets = c(0.40, 0.35),   multispecies_constraint = \"all_species\",   diagnostics = TRUE )  spr_uncon$F_spr_total #> F40_total F35_total  #>     0.048     0.059 spr_con$F_spr_total_constrained #> F40_total_constrained F35_total_constrained  #>                 0.031                 0.036"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"plot-spr-curves-with-reference-points","dir":"Articles","previous_headings":"Run per recruit SPR and YPR calculations","what":"Plot SPR curves with reference points","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"multispecies complexes, informative total curve plot shows complex curve black species curves color. constrained method available, plot also shows species limiting constrained reference point placing point species curve constrained FF.  Interpretation: one species much lower SPR given F, constrained reference point effectively controlled species. RE/BS example, BS limiting species growth maturity slower, reduces SBPR makes SPR decline faster selectivity MM.","code":"plot_spr_curves(spr_con, which = \"total\", digits = 3)"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"species-specific-spr-curves-and-species-specific-reference-points","dir":"Articles","previous_headings":"Run per recruit SPR and YPR calculations","what":"Species-specific SPR curves and species specific reference points","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"species view useful need connect complex-level reference points implied species-level outcomes.","code":"plot_spr_curves(spr_uncon, which = \"species\", digits = 3)"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"decomposition-diagnostics-for-review-and-reporting","dir":"Articles","previous_headings":"","what":"Decomposition diagnostics for review and reporting","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"Age-based decomposition plots help explain SPR differs among species separating effects shared fishing processes species-specific life history. multispecies case, MM selectivity assumed species, differences SPR arise maturity schedules, growth, age distribution reproductive output. plus group used, terminal age can dominate SBPR contributions removals. Dropping plus group plotted panels improves visibility mid-age dynamics, plus-group importance still reported caption spr_con$diagnostics$plus_share.  Interpretation: decomposition diagnostics show differences multispecies SPR RE/BS driven life history timing, differences fishing survivorship processes. Later maturation slower accumulation reproductive biomass cause blackspotted rockfish lose SPR rapidly FF increases, explaining limiting species constrained multispecies Tier 4 reference points. SBPR contribution age: unfished conditions (F0F_0), rougheye rockfish contribute SBPR earlier across broader range ages, reflecting faster maturity growth rates. contrast, blackspotted rockfish contribute relatively little SBPR younger ages rely heavily survival older ages generate spawning biomass. differences driven later maturation slower growth blackspotted rockfish, differences fishing pressure survivorship processes. Survivorship age: Survivorship curves nearly identical species F0 Ftarget, confirming differences SPR driven differential mortality processes. Instead, survivorship interacts species-specific maturity weight--age schedules determine much spawning biomass survives older ages. blackspotted rockfish, modest reductions survivorship older ages translate large proportional losses reproductive output. Role plus group: Plus-group share diagnostics show substantial fraction blackspotted rockfish SBPR generated terminal age unfished conditions, fraction declines sharply reference FF. Rougheye rockfish, contrast, distribute reproductive output evenly across ages. reliance late-life reproduction makes blackspotted rockfish particularly sensitive age truncation, even shared selectivity mortality assumptions.  SBPR removed fishing (F0−FtargetF_0 − F_{target}): rougheye higher SBPR contributions across much age range, results larger absolute SBPR removals even identical selectivity MM. Proportion SBPR removed: Expressing removals relative unfished SBPR clarifies blackspotted rockfish limiting species constrained reference points. Proportional losses accumulate rapidly fishing affects ages blackspotted concentrates reproductive output. metric better reflects SPR sensitivity absolute removals alone.","code":"decomp_plots <- plot_spr_decomp(   spr_con,   which_panels = c(\"contrib\", \"removed\", \"removed_prop\", \"survivorship\"),   drop_plus_from_plot = TRUE, # default   include_plus_caption = TRUE # default )  ## individual plots # decomp_plots$contrib # decomp_plots$removed # decomp_plots$removed_prop # decomp_plots$survivorship  # select a group of plots using optional helper function that relies on the # \"patchwork\" R library grid_spr_decomp(decomp_plots[c(\"contrib\", \"survivorship\")], ncol = 1) grid_spr_decomp(decomp_plots[c(\"removed\", \"removed_prop\")], ncol = 1)"},{"path":[]},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"recruitment-proportions","dir":"Articles","previous_headings":"Sensitivity to recruitment proportions and reference point definition","what":"Recruitment proportions","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"Recruitment proportions affect complex-level SPR curve total SBPR defined sum species-specific SBPR contributions. recruitment proportion assigned one species increases, complex curve becomes similar species curve. Recruitment proportion sensitivity implemented two species complexes, defined single proportion prop assigned first species, second species receives 1 - prop.","code":"prop_grid <- seq(0.2, 0.8, by = 0.05)  # unconstrained sens_uncon <- spr_sensitivity(   x_base = inp,   prop = prop_grid,   spr_targets = c(0.40, 0.35),   multispecies_constraint = \"none\" ) #> spr_sensitivity(): Sweep values are applied to all species simultaneously. Species-specific sweeps are not currently supported.  # constrained sens_con <- spr_sensitivity(   x_base = inp,   prop = prop_grid,   spr_targets = c(0.40, 0.35),   multispecies_constraint = \"all_species\" ) #> spr_sensitivity(): Sweep values are applied to all species simultaneously. Species-specific sweeps are not currently supported."},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"plot-reference-point-sensitivity-across-recruitment-proportions","dir":"Articles","previous_headings":"Sensitivity to recruitment proportions and reference point definition","what":"Plot reference point sensitivity across recruitment proportions","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"default plot summarizes results single panel, colors SPR target, uses linetype distinguish unconstrained versus constrained reference points  Interpretation: constrained rule, reference points determined entirely species lowest SPR given fishing mortality. species-specific SPR curves independent recruitment proportions, constrained reference points remain constant across R0R_0 proprotion scenarios, unconstrained reference points vary relative contribution species total SBPR changes.","code":"p_ref <- plot_recprop_sensitivity(   sens_uncon = sens_uncon,   sens_con = sens_con,   targets = c(0.40, 0.35),   title = \"RE/BS complex: reference point sensitivity to recruitment proportions\" ) p_ref"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"optional-yield-share-at-reference-points","dir":"Articles","previous_headings":"Sensitivity to recruitment proportions and reference point definition","what":"Optional: yield share at reference points","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"Recruitment proportions also control much complex YPR comes species equilibrium conditions. common management question , given recruitment proportion reference point definition, fraction yield implied species. plot_recprop_sensitivity() can optionally return plot yield share reference points. vignette focuses yield share reference points, full YPR curves versus F. Interpretation: Yield-share diagnostics show fraction total equilibrium YPR contributed species SPR-based reference points. Yield share varies smoothly recruitment composition largely insensitive whether constrained unconstrained reference points used, indicating relative yield composition robust small differences FSPRF_{SPR} reference points. default 50/50 recruitment assumption, rougheye rockfish contribute majority equilibrium yield despite blackspotted rockfish limiting species constrained reference points. contrast highlights central feature multispecies Tier 4 assessments: species limits FSPRF_{SPR} need species dominates yield.","code":"p_yshare <- plot_recprop_sensitivity(   sens_uncon = sens_uncon,   sens_con = sens_con,   targets = c(0.40, 0.35),   include_yield_share = TRUE,   title = \"RE/BS complex: implied yield share at reference points\" ) p_yshare$yield_share # also includes the main recprop plot shown above"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/rebs_multispecies.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Multispecies Tier 4 workflow: Gulf of Alaska rougheye and blackspotted rockfish (RE/BS) complex","text":"vignette demonstrates complete multispecies Tier 4 SBPR workflow using tier4tools: Build multispecies spr_input() object verify schedules using plot_spr_inputs() Compute unconstrained constrained multispecies reference points run_spr() Use decomposition plots understand species differ SPR response fishing Conduct recruitment proportion sensitivity two species complex interpret constrained reference points insensitive recruitment proportions","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/articles/sharpchin_single_species.html","id":"background-and-objectives","dir":"Articles","previous_headings":"","what":"Background and objectives","title":"Single species workflow: Gulf of Alaska sharpchin rockfish","text":"Sharpchin rockfish (Sebastes zacentrus) Gulf Alaska caught non-target species limited age fishery data. Sharpchin currently Alaska groundfish species managed Tier 4 assessment framework, provides useful example spawning potential ratio (SPR) yield-per-recruit (YPR) methods can applied age-structured models feasible. vignette demonstrates full Tier 4 per-recruit workflow implemented tier4tools using Gulf Alaska sharpchin rockfish single-species example. objectives : Construct per-recruit inputs using published assessment-derived life history information using spr_inputs(). Validate inputs visually using plot_spr_inputs(). Compute SPR-based fishing mortality reference points using run_spr(). Generate diagnostic decomposition plots review SAFE reporting using plot_spr_decomp(). Evaluate sensitivity reference points uncertainty natural mortality (MM) fishery selectivity using spr_sensitivity().","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/articles/sharpchin_single_species.html","id":"life-history-and-fishery-inputs","dir":"Articles","previous_headings":"","what":"Life history and fishery inputs","title":"Single species workflow: Gulf of Alaska sharpchin rockfish","text":"Biological inputs sharpchin rockfish drawn published studies assessment documentation, including von Bertalanffy growth parameters, weight-length relationships derived trawl survey data, maturity--age estimates, MM estimated using Hoenig (1983) method. Fishery selectivity poorly informed due limited sampling therefore assumed follow knife-edge pattern. base case, M=0.059M = 0.059, maturity parameterized using logistic maturity curve midpoint A50=10.06A_{50} = 10.06 years slope parameter δ=−1.96\\delta = -1.96. Fishery selectivity assumed knife-edge full selection beginning age ac=10a_c = 10 years. maximum age 58 years assumed, assume plus group.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/articles/sharpchin_single_species.html","id":"construct-per-recruit-inputs-with-spr_input","dir":"Articles","previous_headings":"","what":"Construct per-recruit inputs with spr_input()","title":"Single species workflow: Gulf of Alaska sharpchin rockfish","text":"","code":"library(tier4tools)  ages <- 0:100  inp <- spr_input(   ages = ages,   species = list(     Sharpchin = list(       len_at_age = list(type = \"vb\", Linf = 35.02, k = 0.122, t0 = -0.75),       wt_at_age = list(type = \"wl\", alpha = 1.19e-5, beta = 3.056),       maturity = list(type = \"logistic\", a50 = 10.06, delta = -1.96),       selectivity = list(type = \"knife_edge\", a_c = 10),       M = 0.059     )   ),   use_plus_group = FALSE )  str(inp, max.level = 3) #> List of 5 #>  $ ages          : num [1:101] 0 1 2 3 4 5 6 7 8 9 ... #>  $ R0            : num 1 #>  $ use_plus_group: logi FALSE #>  $ rec_prop      : Named num 1 #>   ..- attr(*, \"names\")= chr \"Sharpchin\" #>  $ species       :List of 1 #>   ..$ Sharpchin:List of 11 #>   .. ..$ name           : chr \"Sharpchin\" #>   .. ..$ R0_base        : num 1 #>   .. ..$ R0             : num 1 #>   .. ..$ M_at_age       : num [1:101] 0.059 0.059 0.059 0.059 0.059 0.059 0.059 0.059 0.059 0.059 ... #>   .. ..$ len_at_age     : num [1:101] 3.06 6.73 9.98 12.86 15.4 ... #>   .. ..$ wt_at_age      : num [1:101] 0.000364 0.004041 0.013461 0.02918 0.050679 ... #>   .. ..$ maturity_at_age: num [1:101] 0.00587 0.00973 0.01611 0.02654 0.04345 ... #>   .. ..$ selex_at_age   : num [1:101] 0 0 0 0 0 0 0 0 0 0 ... #>   .. ..$ maturity_delta : num -1.96 #>   .. ..$ maturity_spec  :List of 3 #>   .. ..$ spec           :List of 5"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/sharpchin_single_species.html","id":"validate-assumptions-visually-with-plot_spr_inputs","dir":"Articles","previous_headings":"","what":"Validate assumptions visually with plot_spr_inputs()","title":"Single species workflow: Gulf of Alaska sharpchin rockfish","text":"running SPR calculations, good practice check implied schedules look reasonable. plot_spr_inputs() designed two use cases: user quality assurance, verify maturity, selectivity, weight--age, mortality schedules parameterized input correctly reporting, document base case versus sensitivity assumptions, differences among species  comparing scenarios sensitivity analysis, can pass multiple spr_input() objects via compare facet scenario:","code":"inp_plots <- plot_spr_inputs(inp, panels = c(\"mat_selex\", \"wt\", \"len\", \"M\"))  ## inidividual plots # inp_plots$mat_selex # inp_plots$wt # inp_plots$len # inp_plots$M  # select a group of plots using optional helper function that relies on # the \"patchwork\" R library grid_spr_inputs(inp_plots, order = c(\"mat_selex\", \"wt\",\"len\",\"M\"), ncol = 2, guides = \"keep\") # Example (**code only shown, not run**): construct additional spr_input # objects, either from scratch or by modifying existing input objects as shown # below using public-facing functions like selectivity_at_age(), # maturity_at_age(), wt_at_age(), or len_at_age()  # sensitivity 1 (knife-edge selectivity with max selectivity at age 5) inp_sens1 <- inp  inp_sens1$species$Sharpchin$selex_at_age <- selectivity_at_age(ages = inp$ages, selectivity = list(type = \"knife_edge\", a_c = 5))  # sensitivity 2 (knife-edge selectivity with max selectivity at age 5) inp_sens2 <- inp  inp_sens2$species$Sharpchin$selex_at_age <- selectivity_at_age(ages = inp$ages, selectivity = list(type = \"knife_edge\", a_c = 15))  # show base + sensitivities inp_plots <- plot_spr_inputs(x = inp, compare = list(Sens1 = inp_sens1, Sens2 = inp_sens2), ) inp_plots$mat_selex"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/sharpchin_single_species.html","id":"run-per-recruit-spr-and-ypr-with-run_spr","dir":"Articles","previous_headings":"","what":"Run per-recruit SPR and YPR with run_spr()","title":"Single species workflow: Gulf of Alaska sharpchin rockfish","text":"","code":"spr_out <- run_spr(   inp,   diagnostics = TRUE )  spr_out$F_spr_total #> F40_total F35_total  #>     0.066     0.080"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/sharpchin_single_species.html","id":"plot-spr-curves","dir":"Articles","previous_headings":"","what":"Plot SPR curves","title":"Single species workflow: Gulf of Alaska sharpchin rockfish","text":"curve shows SPR(F)=SBPR(F)/SBPR(0)SPR(F) = SBPR(F) / SBPR(0) across fishing mortality grid. Horizontal lines show target SPR levels (example 0.40 0.35). corresponding fishing mortality reference points (example F40%F_{40\\%} F35%F_{35\\%}) values FF curve intersects targets.","code":"plot_spr_curves(spr_out)"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/sharpchin_single_species.html","id":"diagnostic-decomposition-plots","dir":"Articles","previous_headings":"","what":"Diagnostic decomposition plots","title":"Single species workflow: Gulf of Alaska sharpchin rockfish","text":"Tier 4 SPR calculations can sensitive maturity schedules, selectivity assumptions, weight--age, plus group treatment. support consistent review reporting, tier4tools provides SBPR age decomposition diagnostics set standardized panels.  Interpretation: plots$contrib shows SBPR contribution age unfished conditions (F = 0) diagnostic reference fishing mortality (Ftarget). plots$removed shows age-specific SBPR removed fishing, computed contribution F = 0 minus contribution Ftarget. plots$survivorship shows per-recruit survivorship F = 0 Ftarget. plus group share reported separately fraction total SBPR contributed terminal age F = 0 Ftarget. assume plus group calculations model; therefore, plus-share almost non-existent.","code":"plots <- plot_spr_decomp(spr_out,                          which_panels = c(\"contrib\", \"removed\", \"survivorship\"),                          drop_plus_from_plot = TRUE)  ## individual plots # plots$contrib # plots$removed # plots$survivorship  # select a group of plots using optional helper function that relies on # the \"patchwork\" R library grid_spr_decomp(plots) spr_out$diagnostics$plus_share #> NULL"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/sharpchin_single_species.html","id":"sensitivity-analysis-natural-mortality-m-and-selectivity","dir":"Articles","previous_headings":"","what":"Sensitivity analysis: natural mortality MM and selectivity","title":"Single species workflow: Gulf of Alaska sharpchin rockfish","text":"Uncertainty MM fishery selectivity key concern sharpchin rockfish. run structured sensitivity analysis varying: MM 0.05 0.12 knife-edge selectivity age aca_c 5 15 years inputs held fixed.","code":"sens <- spr_sensitivity(   inp,   M = seq(0.05, 0.12, by = 0.01),   selex_ac = seq(5, 15, by = 1),   spr_targets = c(0.40, 0.35),   multispecies_constraint = \"none\" )  head(sens) #>   scenario_id    M maturity_a50 selex_ac prop F40_total F35_total #> 1           1   NA           NA       NA   NA     0.066     0.080 #> 2           2 0.05           NA       NA   NA     0.058     0.070 #> 3           3 0.06           NA       NA   NA     0.066     0.082 #> 4           4 0.07           NA       NA   NA     0.078     0.094 #> 5           5 0.08           NA       NA   NA     0.088     0.108 #> 6           6 0.09           NA       NA   NA     0.100     0.122 #>   F40_total_constrained F35_total_constrained YPR_at_F40 #> 1                    NA                    NA 0.11651216 #> 2                    NA                    NA 0.13460304 #> 3                    NA                    NA 0.11420131 #> 4                    NA                    NA 0.09968137 #> 5                    NA                    NA 0.08669596 #> 6                    NA                    NA 0.07630796 #>   plus_share_Sharpchin_F0 plus_share_Sharpchin_Ftarget F40_Sharpchin #> 1                      NA                           NA         0.066 #> 2                      NA                           NA         0.058 #> 3                      NA                           NA         0.066 #> 4                      NA                           NA         0.078 #> 5                      NA                           NA         0.088 #> 6                      NA                           NA         0.100 #>   F35_Sharpchin YPR40_Sharpchin share40_Sharpchin YPR40_total #> 1         0.080      0.11651216                 1  0.11651216 #> 2         0.070      0.13460304                 1  0.13460304 #> 3         0.082      0.11420131                 1  0.11420131 #> 4         0.094      0.09968137                 1  0.09968137 #> 5         0.108      0.08669596                 1  0.08669596 #> 6         0.122      0.07630796                 1  0.07630796 #>   YPR40_Sharpchin_constrained share40_Sharpchin_constrained #> 1                          NA                            NA #> 2                          NA                            NA #> 3                          NA                            NA #> 4                          NA                            NA #> 5                          NA                            NA #> 6                          NA                            NA #>   YPR40_total_constrained YPR35_Sharpchin share35_Sharpchin YPR35_total #> 1                      NA      0.12353530                 1  0.12353530 #> 2                      NA      0.14233674                 1  0.14233674 #> 3                      NA      0.12202936                 1  0.12202936 #> 4                      NA      0.10551203                 1  0.10551203 #> 5                      NA      0.09230489                 1  0.09230489 #> 6                      NA      0.08108499                 1  0.08108499 #>   YPR35_Sharpchin_constrained share35_Sharpchin_constrained #> 1                          NA                            NA #> 2                          NA                            NA #> 3                          NA                            NA #> 4                          NA                            NA #> 5                          NA                            NA #> 6                          NA                            NA #>   YPR35_total_constrained             scenario_label M_value maturity_a50_value #> 1                      NA  M=base, a50=base, ac=base   0.059              10.06 #> 2                      NA M=0.050, a50=base, ac=base   0.050              10.06 #> 3                      NA M=0.060, a50=base, ac=base   0.060              10.06 #> 4                      NA M=0.070, a50=base, ac=base   0.070              10.06 #> 5                      NA M=0.080, a50=base, ac=base   0.080              10.06 #> 6                      NA M=0.090, a50=base, ac=base   0.090              10.06 #>   selex_ac_value prop_value #> 1             10         NA #> 2             10         NA #> 3             10         NA #> 4             10         NA #> 5             10         NA #> 6             10         NA"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/sharpchin_single_species.html","id":"visualize-sensitivity-results","dir":"Articles","previous_headings":"","what":"Visualize sensitivity results","title":"Single species workflow: Gulf of Alaska sharpchin rockfish","text":"Heatmaps compact way summarize reference points vary across structured grid assumptions.  can similarly visualize F35F_{35} yield F40F_{40}.   Interpretation: Fishery selectivity MM dominant sources uncertainty SPR-based reference points, later age full selection higher MM resulting higher F40%F_{40\\%} F35%F_{35\\%}. low MM values, including base-case M=0.059, early selectivity, F40%F_{40\\%} uniformly low relatively insensitive either parameter. contrast, higher MM later selectivity, small changes either assumption produced large shifts F40%F_{40\\%}. YPR evaluated F40%F_{40\\%} increases later selectivity decreases higher MM, reflecting differences SPR-constrained FF rather YPR fixed FF.","code":"plot_sensitivity_heatmap(   sens,   x = \"selex_ac\",   y = \"M\",   fill = \"F40_total\",   title = \"Sensitivity of F40 to M and selectivity assumptions\",   fill_scale = \"viridis\" ) plot_sensitivity_heatmap(   sens,   x = \"selex_ac\",   y = \"M\",   fill = \"F35_total\",   title = \"Sensitivity of F35 to natural mortality and selectivity assumptions\" ) plot_sensitivity_heatmap(   sens,   x = \"selex_ac\",   y = \"M\",   fill = \"YPR_at_F40\",   title = \"Sensitivity of YPR at F40 to natural mortality and selectivity assumptions\" )"},{"path":"https://noaa-afsc.github.io/tier4tools/articles/sharpchin_single_species.html","id":"summary","dir":"Articles","previous_headings":"","what":"Summary","title":"Single species workflow: Gulf of Alaska sharpchin rockfish","text":"vignette demonstrates complete Tier 4 per-recruit workflow single species using tier4tools. workflow separates biological fishery assumptions downstream calculations, provides standardized diagnostics plotting helpers, supports structured sensitivity evaluation influential uncertainties. multispecies vignette, workflow extended stock complexes additional outputs introduced constrained reference points.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/authors.html","id":null,"dir":"","previous_headings":"","what":"Authors","title":"Authors and Citation","text":"Jane Y. Sullivan. Author, maintainer. Kristen L. Omori. Author.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/authors.html","id":"citation","dir":"","previous_headings":"","what":"Citation","title":"Authors and Citation","text":"Sullivan J, Omori K (2026). tier4tools: Tier 4 Spawning Potential Ratio (SPR) Reference Points NPFMC Groundfish Assessments. R package version 0.1.0.","code":"@Manual{,   title = {tier4tools: Tier 4 Spawning Potential Ratio (SPR) Reference Points for NPFMC Groundfish Assessments},   author = {Jane Y. Sullivan and Kristen L. Omori},   year = {2026},   note = {R package version 0.1.0}, }"},{"path":[]},{"path":"https://noaa-afsc.github.io/tier4tools/index.html","id":"tier-4-spawning-potential-ratio-spr-reference-points-in-alaska-groundfish-stock-assessments","dir":"","previous_headings":"","what":"Tier 4 Spawning Potential Ratio (SPR) reference points in Alaska groundfish stock assessments","title":"Tier 4 Spawning Potential Ratio (SPR) Reference Points for NPFMC Groundfish Assessments","text":"tier4tools R package developed support stock assessment scientists develop North Pacific Fishery Management Council (NPFMC) Tier 4 alternatives Alaskan groundfish stocks. package provides transparent, reproducible workflow computing SPR-based reference points full age-structured models available appropriate. package provides: consistent implementation SPR analyses single-species multispecies stocks, report-ready visualizations output, diagnostic tools understanding sources uncertainty SPR-based reference points.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/index.html","id":"installation-and-development","dir":"","previous_headings":"","what":"Installation and Development","title":"Tier 4 Spawning Potential Ratio (SPR) Reference Points for NPFMC Groundfish Assessments","text":"tier4tools active development yet CRAN. can install development version GitHub: Issues, suggestions, contributions welcome via GitHub.","code":"devtools::install_github(\"noaa-afsc/tier4tools\", build_vignettes = TRUE)"},{"path":"https://noaa-afsc.github.io/tier4tools/index.html","id":"basic-workflow","dir":"","previous_headings":"","what":"Basic Workflow","title":"Tier 4 Spawning Potential Ratio (SPR) Reference Points for NPFMC Groundfish Assessments","text":"typical Tier 4 analysis using tier4tools follows four main steps: Define biological fishery inputs using spr_input(). Visualize validate inputs using plot_spr_inputs(). Compute per-recruit objects SPR-based reference points (e.g., F40%, F35%) using run_spr(). Visualize results plot_spr_curves(). Show age decomposition plus group diagnostics spawning biomass per recruit (SBPR) contributions, removals, survivorship using plot_spr_decomp(). Run structured sensitivity analyses key SPR input parameters (e.g., maturity, fishery selectivity, natural mortality) using spr_sensitivity(). Visualize results using plot_sensitivity_heatmap(). multispecies applications, sensitivity analyses recruitment allocation species also available. results can visualized using plot_recprop_sensitivity().","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/index.html","id":"vignettes","dir":"","previous_headings":"","what":"Vignettes","title":"Tier 4 Spawning Potential Ratio (SPR) Reference Points for NPFMC Groundfish Assessments","text":"Detailed examples available package vignettes, including: single-species Tier 4 workflows, multispecies per-recruit analyses, interpretation age decomposition plots sensitivity results","code":"browseVignettes(\"tier4tools\")"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_len_at_age.html","id":null,"dir":"Reference","previous_headings":"","what":"Length-at-age — calc_len_at_age","title":"Length-at-age — calc_len_at_age","text":"Convert user-specified length--age specification age-specific vector spanning full age range ages = a_min:a_max.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_len_at_age.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Length-at-age — calc_len_at_age","text":"","code":"calc_len_at_age(ages, len_at_age)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_len_at_age.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Length-at-age — calc_len_at_age","text":"ages Numeric vector ages (e.g., a_min:a_max). len_at_age named list specifying length--age. Required element type. type=\"vb\", provide Linf, k, t0. type=\"vector\", provide L.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_len_at_age.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Length-at-age — calc_len_at_age","text":"Numeric vector L_a length(ages).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_len_at_age.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Length-at-age — calc_len_at_age","text":"Supported inputs: type = \"vb\": von Bertalanffy growth parameters Linf, k, t0. type = \"vector\": external length--age vector L length(L) == length(ages). Von Bertalanffy form: $$L_a = L_\\infty \\left(1 - \\exp\\left[-k(- t_0)\\right]\\right)$$","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_maturity_at_age.html","id":null,"dir":"Reference","previous_headings":"","what":"Maturity-at-age — calc_maturity_at_age","title":"Maturity-at-age — calc_maturity_at_age","text":"Convert user-specified maturity specification age-specific vector spanning full age range ages = a_min:a_max.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_maturity_at_age.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Maturity-at-age — calc_maturity_at_age","text":"","code":"calc_maturity_at_age(ages, maturity)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_maturity_at_age.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Maturity-at-age — calc_maturity_at_age","text":"ages Numeric vector ages (e.g., a_min:a_max). maturity named list specifying maturity. Required element type. type=\"vector\", provide m. type=\"logistic\", provide a50 delta.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_maturity_at_age.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Maturity-at-age — calc_maturity_at_age","text":"Numeric vector maturity_at_age length(ages).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_maturity_at_age.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Maturity-at-age — calc_maturity_at_age","text":"Supported inputs: type = \"vector\": external maturity vector m length(m) == length(ages). type = \"logistic\": logistic curve parameters a50 delta. Logistic form: $$m_a = \\frac{1}{1 + \\exp\\left(\\frac{- a_{50}}{\\delta}\\right)}$$","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_selectivity_at_age.html","id":null,"dir":"Reference","previous_headings":"","what":"Fishery selectivity-at-age — calc_selectivity_at_age","title":"Fishery selectivity-at-age — calc_selectivity_at_age","text":"Convert user-specified selectivity specification age-specific vector spanning full age range ages = a_min:a_max. Selectivity bounded \\([0, 1]\\) may optionally scaled max(s_a) = 1.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_selectivity_at_age.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fishery selectivity-at-age — calc_selectivity_at_age","text":"","code":"calc_selectivity_at_age(ages, selectivity, scale_max = TRUE)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_selectivity_at_age.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fishery selectivity-at-age — calc_selectivity_at_age","text":"ages Numeric vector ages (e.g., a_min:a_max). selectivity named list specifying selectivity. Required element type. type=\"vector\", provide s. type=\"knife_edge\", provide a_c. type=\"logistic\", provide a50 delta. scale_max Logical. TRUE, scales selectivity max(s_a) = 1 possible.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_selectivity_at_age.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fishery selectivity-at-age — calc_selectivity_at_age","text":"Numeric vector selectivity_at_age length(ages).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_selectivity_at_age.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fishery selectivity-at-age — calc_selectivity_at_age","text":"Supported inputs: type = \"vector\": external selectivity vector s length(s) == length(ages). type = \"knife_edge\": step function age--full-selection a_c. type = \"logistic\": logistic curve parameters a50 delta. Knife-edge form: $$s_a = 0 \\text{ } < a_c,\\quad s_a = 1 \\text{ } \\ge a_c$$ Logistic form: $$s_a = \\frac{1}{1 + \\exp\\left(\\frac{- a_{50}}{\\delta}\\right)}$$","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_wt_at_age.html","id":null,"dir":"Reference","previous_headings":"","what":"Weight-at-age — calc_wt_at_age","title":"Weight-at-age — calc_wt_at_age","text":"Convert user-specified weight--age specification age-specific vector spanning full age range ages = a_min:a_max.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_wt_at_age.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Weight-at-age — calc_wt_at_age","text":"","code":"calc_wt_at_age(ages, wt_at_age, len_at_age = NULL)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_wt_at_age.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Weight-at-age — calc_wt_at_age","text":"ages Numeric vector ages (e.g., a_min:a_max). wt_at_age named list specifying weight--age. Required element type. type=\"wl\", provide alpha beta. type=\"vector\", provide W. len_at_age Optional numeric vector L_a length(ages). Required wt_at_age$type = \"wl\".","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_wt_at_age.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Weight-at-age — calc_wt_at_age","text":"Numeric vector w_a length(ages).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/calc_wt_at_age.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Weight-at-age — calc_wt_at_age","text":"Supported inputs: type = \"wl\": derive weight--age length--age using alpha beta. type = \"vector\": external weight--age vector W length(W) == length(ages). Weight-length form: $$w_a = \\alpha L_a^\\beta$$","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/grid_spr_decomp.html","id":null,"dir":"Reference","previous_headings":"","what":"Arrange SPR decomposition plots into report-ready grid — grid_spr_decomp","title":"Arrange SPR decomposition plots into report-ready grid — grid_spr_decomp","text":"Combined list output plot_spr_decomp() single multipanel figure using patchwork. patchwork Suggests, function run installed.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/grid_spr_decomp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Arrange SPR decomposition plots into report-ready grid — grid_spr_decomp","text":"","code":"grid_spr_decomp(   plots,   order = NULL,   ncol = 1,   nrow = NULL,   guides = c(\"collect\", \"keep\"),   title = NULL,   caption = NULL )"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/grid_spr_decomp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Arrange SPR decomposition plots into report-ready grid — grid_spr_decomp","text":"plots named list ggplot objects returned plot_spr_decomp(). order Character vector giving plot names (plots) order arrange. Defaults c(\"contrib\",\"removed\",\"removed_prop\",\"survivorship\") present, otherwise names(plots). ncol Number columns grid. nrow Optional number rows. NULL, patchwork chooses automatically. guides Passed patchwork::plot_layout(guides = ...). Default \"collect\" collects legends possible. title Optional figure title (character). Added patchwork::plot_annotation(). caption Optional figure caption (character). Added patchwork::plot_annotation().","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/grid_spr_decomp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Arrange SPR decomposition plots into report-ready grid — grid_spr_decomp","text":"patchwork object (ggplot-like object) can printed saved.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/grid_spr_decomp.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Arrange SPR decomposition plots into report-ready grid — grid_spr_decomp","text":"Typical usage:","code":"decomp_plots <- plot_spr_decomp(spr_out, drop_plus_from_plot = TRUE)   grid_spr_decomp(decomp_plots, order = c(\"contrib\",\"removed\",\"survivorship\"), ncol = 1)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/grid_spr_inputs.html","id":null,"dir":"Reference","previous_headings":"","what":"Arrange SPR input plots into a report-ready grid — grid_spr_inputs","title":"Arrange SPR input plots into a report-ready grid — grid_spr_inputs","text":"Combine list output plot_spr_inputs() multi-panel figure using patchwork. patchwork Suggests, function run installed.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/grid_spr_inputs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Arrange SPR input plots into a report-ready grid — grid_spr_inputs","text":"","code":"grid_spr_inputs(   plots,   order = NULL,   ncol = 1,   nrow = NULL,   guides = c(\"collect\", \"keep\"),   title = NULL,   caption = NULL )"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/grid_spr_inputs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Arrange SPR input plots into a report-ready grid — grid_spr_inputs","text":"plots named list ggplot objects returned plot_spr_inputs(). order Character vector giving plot names (plots) order arrange. Defaults names(plots). ncol Number columns grid. nrow Optional number rows. NULL, patchwork chooses automatically. guides Passed patchwork::plot_layout(guides = ...). Default \"collect\" collects legends possible. title Optional figure title (character). Added patchwork::plot_annotation(). caption Optional figure caption (character). Added patchwork::plot_annotation().","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/grid_spr_inputs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Arrange SPR input plots into a report-ready grid — grid_spr_inputs","text":"patchwork object (ggplot-like object) can printed saved.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/grid_spr_inputs.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Arrange SPR input plots into a report-ready grid — grid_spr_inputs","text":"Typical usage:","code":"inp_plots <- plot_spr_inputs(inp, panels = c(\"mat_selex\",\"wt\",\"len\",\"M\"))   grid_spr_inputs(inp_plots, order = c(\"mat_selex\",\"wt\",\"len\",\"M\"), ncol = 1)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/len_at_age.html","id":null,"dir":"Reference","previous_headings":"","what":"Length-at-age — len_at_age","title":"Length-at-age — len_at_age","text":"Build length--age vector length specification.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/len_at_age.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Length-at-age — len_at_age","text":"","code":"len_at_age(ages, len_at_age)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/len_at_age.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Length-at-age — len_at_age","text":"ages Numeric vector ages (e.g., a_min:a_max). len_at_age named list specifying length--age. Required element type. type=\"vb\", provide Linf, k, t0. type=\"vector\", provide L.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/len_at_age.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Length-at-age — len_at_age","text":"Numeric vector length length(ages).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/len_at_age.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Length-at-age — len_at_age","text":"user-facing wrapper around internal helper used spr_input(). useful sensitivity analyses user wants modify length--age specification existing spr_input() object.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/maturity_at_age.html","id":null,"dir":"Reference","previous_headings":"","what":"Maturity-at-age — maturity_at_age","title":"Maturity-at-age — maturity_at_age","text":"Build maturity--age vector maturity specification.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/maturity_at_age.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Maturity-at-age — maturity_at_age","text":"","code":"maturity_at_age(ages, maturity)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/maturity_at_age.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Maturity-at-age — maturity_at_age","text":"ages Numeric vector ages (e.g., a_min:a_max). maturity named list specifying maturity. Required element type. type=\"vector\", provide m. type=\"logistic\", provide a50 delta.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/maturity_at_age.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Maturity-at-age — maturity_at_age","text":"Numeric vector length length(ages) values \\([0,1]\\).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/maturity_at_age.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Maturity-at-age — maturity_at_age","text":"user-facing wrapper around internal helper used spr_input(). useful sensitivity analyses user wants modify maturity specification existing spr_input() object. returns maturity bounded \\([0,1]\\).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_recprop_sensitivity.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot multispecies sensitivity to recruitment proportions — plot_recprop_sensitivity","title":"Plot multispecies sensitivity to recruitment proportions — plot_recprop_sensitivity","text":"Creates report-ready plots summarizing multispecies (complex-level) SPR reference points change across recruitment proportion assumptions two-species complexes. function designed work directly output spr_sensitivity() run two settings: (1) unconstrained run complex reference points derived combined SPR curve (multispecies_constraint = \"none\"), (2) constrained run species must meet target SPR (multispecies_constraint = \"all_species\").","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_recprop_sensitivity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot multispecies sensitivity to recruitment proportions — plot_recprop_sensitivity","text":"","code":"plot_recprop_sensitivity(   sens_uncon,   sens_con,   targets = c(0.4, 0.35),   prop_col = \"prop_value\",   show_delta = FALSE,   include_species = FALSE,   include_yield_share = FALSE,   title = \"Sensitivity of multispecies reference points to recruitment proportions\",   xlab = NULL )"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_recprop_sensitivity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot multispecies sensitivity to recruitment proportions — plot_recprop_sensitivity","text":"sens_uncon data frame returned spr_sensitivity() multispecies_constraint = \"none\". sens_con data frame returned spr_sensitivity() multispecies_constraint = \"all_species\". targets Numeric vector SPR targets plot (values (0, 1)), example c(0.40, 0.35). prop_col Character. Name recruitment proportion column use x-axis. Defaults \"prop_value\" (recommended), can set \"prop\" desired. show_delta Logical. FALSE (default), plots absolute reference point F. TRUE, plots deviations unconstrained reference point (\\(\\Delta F\\)). include_species Logical. TRUE, attempts return limiting-species plot second panel. include_yield_share Logical. TRUE, attempts return implied yield-share plot third panel. title Character. Main plot title. xlab Character. Optional x-axis label. NULL, function uses species names stored attr(sens_uncon, \"species\") available.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_recprop_sensitivity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot multispecies sensitivity to recruitment proportions — plot_recprop_sensitivity","text":"include_species = FALSE include_yield_share = FALSE, returns single ggplot object (main plot). Otherwise returns named list : main main reference-point sensitivity plot (ggplot). limiting_species limiting-species panel (ggplot) NULL. yield_share implied yield-share panel (ggplot) NULL.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_recprop_sensitivity.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot multispecies sensitivity to recruitment proportions — plot_recprop_sensitivity","text":"Default behavior. main plot single panel : color = SPR target (example, 0.40 vs 0.35), linetype = reference point method (unconstrained vs constrained). Delta option. show_delta = TRUE, unconstrained values plotted 0 baseline constrained values shows constraint-induced change recruitment proportion target: $$\\Delta F = F_{\\mathrm{method}} - F_{\\mathrm{unconstrained}}.$$ Optional diagnostics. include_species = TRUE, function also attempts return limiting-species panel based species-specific reference point columns produced spr_sensitivity() (example F40_RE, F40_BS). limiting species defined species smallest species-specific reference point recruitment proportion target. include_yield_share = TRUE, function attempts return implied yield-share panel using yield-share columns added spr_sensitivity(), example share40_RE, share40_BS, constrained equivalents share40_RE_constrained, share40_BS_constrained. Yield shares interpreted recruitment-weighted YPR contributions reference point F. required columns present, corresponding optional plots returned NULL.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_recprop_sensitivity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot multispecies sensitivity to recruitment proportions — plot_recprop_sensitivity","text":"","code":"if (FALSE) { # \\dontrun{ sens_uncon <- spr_sensitivity(inp, prop = seq(0.2, 0.8, 0.05),                              multispecies_constraint = \"none\") sens_con   <- spr_sensitivity(inp, prop = seq(0.2, 0.8, 0.05),                              multispecies_constraint = \"all_species\")  # Main plot only plot_recprop_sensitivity(sens_uncon, sens_con)  # Delta plot plot_recprop_sensitivity(sens_uncon, sens_con, show_delta = TRUE)  # Return diagnostic panels (if columns are available) plots <- plot_recprop_sensitivity(   sens_uncon, sens_con,   include_species = TRUE,   include_yield_share = TRUE ) plots$main plots$limiting_species plots$yield_share } # }"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_sensitivity_heatmap.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot sensitivity heatmap for SPR outputs — plot_sensitivity_heatmap","title":"Plot sensitivity heatmap for SPR outputs — plot_sensitivity_heatmap","text":"Heatmap based spr_sensitivity() output two-parameter sweep base values overlayed. Uses viridis default available.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_sensitivity_heatmap.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot sensitivity heatmap for SPR outputs — plot_sensitivity_heatmap","text":"","code":"plot_sensitivity_heatmap(   sens_df,   x,   y,   fill,   facet = NULL,   title = NULL,   fill_scale = c(\"viridis\", \"base\"),   base_marker = TRUE,   base_point_size = 5,   base_point_color = \"#D55E00\",   base_point_stroke = 1.4,   base_label = FALSE )"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_sensitivity_heatmap.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot sensitivity heatmap for SPR outputs — plot_sensitivity_heatmap","text":"sens_df Data frame returned spr_sensitivity(). x Name column use x-axis (character). y Name column use y-axis (character). fill Name column use tile fill (character). facet Optional column name facet (character). title Optional plot title. fill_scale Character, either \"base\" \"viridis\" (default). base_marker Logical. TRUE, overlays base-case marker base values available. base_point_size Numeric, size base case mark (X). base_point_color Outline color base case mark, defaults colorblind-friendly orange. base_point_stroke Stroke width base case mark. base_label Logical. TRUE, labels base marker \"Base\".","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_sensitivity_heatmap.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot sensitivity heatmap for SPR outputs — plot_sensitivity_heatmap","text":"ggplot object.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_sensitivity_heatmap.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot sensitivity heatmap for SPR outputs — plot_sensitivity_heatmap","text":"function intended visualization structured parameter sweeps x y numeric columns sensitivity table fill numeric output (example \"F40_total\", \"F40_total_constrained\", \"YPR_at_F40\", \"plus_share_RE_Ftarget\").","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_sensitivity_heatmap.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot sensitivity heatmap for SPR outputs — plot_sensitivity_heatmap","text":"","code":"if (FALSE) { # \\dontrun{ # Heatmap of unconstrained F40 across (M, a50) plot_sensitivity_heatmap(out, x = \"M\", y = \"maturity_a50\", fill = \"F40_total\") } # }"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_curves.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot SPR–F curves with reference points — plot_spr_curves","title":"Plot SPR–F curves with reference points — plot_spr_curves","text":"Visualize spawning potential ratio (SPR) function fishing mortality (F) run_spr() output, report-ready annotations SPR-based fishing mortality reference points (example, F40% F35%).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_curves.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot SPR–F curves with reference points — plot_spr_curves","text":"","code":"plot_spr_curves(spr_out, which = c(\"total\", \"species\"), digits = 3)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_curves.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot SPR–F curves with reference points — plot_spr_curves","text":"spr_out Output list run_spr(). Character string. multispecies outputs : \"total\" Plot combined SPR(F) complex (black), species overlays (colored). \"species\" Plot species-specific SPR(F) curves (colored). digits Integer number digits show reported F values.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_curves.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot SPR–F curves with reference points — plot_spr_curves","text":"ggplot object.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_curves.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot SPR–F curves with reference points — plot_spr_curves","text":"plotted. function plots SPR(F) = SBPR(F) / SBPR(0) across fishing mortality grid spr_out$F_vec. Horizontal reference lines drawn target SPR level spr_out$spr_targets vertical reference lines drawn F-based reference points. Single species. spr_out contains one species, function always produces single-species plot ignores . Multispecies complexes. = \"species\" shows one SPR(F) curve per species (colored) annotates species' reference points. = \"total\" shows combined complex SPR(F) curve (black) optional species overlays (colored). constrained complex reference points exist (.e., spr_out$F_spr_total_constrained contains finite values), plot also shows unconstrained constrained complex reference points, highlights limiting species constrained reference points. Multispecies constraints. run_spr() called multispecies_constraint = \"all_species\", constrained combined reference points may available spr_out$F_spr_total_constrained. present, constrained unconstrained reference points shown together distinguished Method (shape linetype).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_curves.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot SPR–F curves with reference points — plot_spr_curves","text":"","code":"if (FALSE) { # \\dontrun{ spr_out1 <- run_spr(inp_single, diagnostics = FALSE) plot_spr_curves(spr_out1)  spr_out2 <- run_spr(inp_multi, diagnostics = FALSE, multispecies_constraint = \"all_species\") plot_spr_curves(spr_out2, which = \"total\") plot_spr_curves(spr_out2, which = \"species\") } # }"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_decomp.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot SPR diagnostics, SBPR age decompositions — plot_spr_decomp","title":"Plot SPR diagnostics, SBPR age decompositions — plot_spr_decomp","text":"Creates report-ready diagnostic plots age-specific decompositions spawning biomass per recruit (SBPR) unfished conditions (F = 0) reference fishing mortality (F = Ftarget) chosen run_spr() (default = F40).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_decomp.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot SPR diagnostics, SBPR age decompositions — plot_spr_decomp","text":"","code":"plot_spr_decomp(   spr_out,   species = NULL,   drop_plus_from_plot = TRUE,   include_plus_caption = TRUE,   which_panels = c(\"contrib\", \"removed\", \"survivorship\") )"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_decomp.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot SPR diagnostics, SBPR age decompositions — plot_spr_decomp","text":"spr_out Output list run_spr() diagnostics = TRUE. species Character vector species include. Defaults species spr_out. drop_plus_from_plot Logical. TRUE (default), drops terminal age plotted panels (plus-group diagnostics available). include_plus_caption Logical. TRUE (default), adds plus-group share caption plots$contrib available. which_panels Character vector, c(\"contrib\", \"removed\", \"removed_prop\", \"survivorship\").","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_decomp.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot SPR diagnostics, SBPR age decompositions — plot_spr_decomp","text":"named list ggplot objects. compact summary table attached attr(, \"summary\").","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_decomp.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Plot SPR diagnostics, SBPR age decompositions — plot_spr_decomp","text":"Returned object named list ggplot objects: plots$contrib: SBPR contribution age, comparing F0 vs Ftarget. plots$removed: SBPR removed fishing age (F0 - Ftarget). plots$removed_prop: (shown default) SBPR removed fishing age, normalized species' total unfished SBPR (F0). Useful multispecies applications compare fractional losses among species absolute SBPR magnitudes differ. plots$survivorship: survivorship age (per recruit), F0 vs Ftarget. Plus-group treatment can strongly influence SBPR, especially long-lived species. drop_plus_from_plot = TRUE (default), terminal age excluded plots avoid dominance plus group, fraction total SBPR attributable terminal age retained spr_out$diagnostics$plus_share can appended plot caption. Summary table. function also attaches compact per-species summary table (unfished SBPR, SBPR Ftarget, implied SPR Ftarget, plus-group shares available) attr(plots, \"summary\").","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_decomp.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Plot SPR diagnostics, SBPR age decompositions — plot_spr_decomp","text":"","code":"if (FALSE) { # \\dontrun{ spr_out <- run_spr(inp, diagnostics = TRUE,                   multispecies_constraint = \"all_species\")  # Default panels plots <- plot_spr_decomp(spr_out, drop_plus_from_plot = TRUE) plots$contrib plots$removed plots$survivorship  # Summary table for optional reporting attr(plots, \"summary\") } # }"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_inputs.html","id":null,"dir":"Reference","previous_headings":"","what":"Plot SPR input assumptions — plot_spr_inputs","title":"Plot SPR input assumptions — plot_spr_inputs","text":"Visualize inputs supplied spr_input() object checking assumptions reporting (base vs sensitivity, across species). default, makes: maturity selectivity panel weight--age Optional panels include length--age M--age.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_inputs.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Plot SPR input assumptions — plot_spr_inputs","text":"","code":"plot_spr_inputs(   x,   species = NULL,   compare = NULL,   panels = c(\"mat_selex\", \"wt\", \"len\", \"M\"),   overlay_maturity_selex = TRUE,   return_data = FALSE )"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_inputs.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Plot SPR input assumptions — plot_spr_inputs","text":"x object returned spr_input(). species Character vector species names plot. Defaults x$species. compare Optional named list additional spr_input objects (e.g., sensitivities). element name used scenario label legends/facets. Example: compare = list(Base = inp_base, Sens1 = inp_sens) panels Character vector specifying panels draw. : c(\"mat_selex\",\"wt\",\"len\",\"M\") overlay_maturity_selex Logical. TRUE, maturity selectivity overlayed single plot (recommended). return_data Logical. TRUE, returns list plots tidy data used.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/plot_spr_inputs.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Plot SPR input assumptions — plot_spr_inputs","text":"default, returns named list ggplot objects. return_data=TRUE, returns list(plots=..., data=...).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/run_spr.html","id":null,"dir":"Reference","previous_headings":"","what":"Run per-recruit SPR and YPR calculations — run_spr","title":"Run per-recruit SPR and YPR calculations — run_spr","text":"Computes spawning potential ratio (SPR) yield per recruit (YPR) across range fishing mortality values single stock multispecies complex defined spr_input(). function returns species-specific combined (total) SPR(F) YPR(F) curves, SPR-based fishing mortality reference points (e.g., F40, F35), optional decomposition diagnostics.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/run_spr.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Run per-recruit SPR and YPR calculations — run_spr","text":"","code":"run_spr(   x,   F_vec = seq(0, 0.4, by = 0.001),   spr_targets = c(0.4, 0.35),   multispecies_constraint = c(\"none\", \"all_species\"),   diagnostics = TRUE )"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/run_spr.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Run per-recruit SPR and YPR calculations — run_spr","text":"x object returned spr_input() defining ages species-specific life history schedules. F_vec Numeric vector fishing mortality values (F) evaluate. Must finite >= 0. spr_targets Numeric vector SPR targets (0,1), example c(0.40, 0.35). multispecies_constraint Character string specifying whether apply multispecies constraint selecting combined reference points. Options : \"none\" Unconstrained reference points based combined SPR curve . \"all_species\" Constrained combined reference points, species must meet target SPR. diagnostics Logical. TRUE, returns plus-group diagnostics age-specific decompositions.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/run_spr.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Run per-recruit SPR and YPR calculations — run_spr","text":"named list following elements: F_vec Fishing mortality grid used calculations. spr_targets SPR targets requested. multispecies_constraint Constraint setting used. SPR_total Combined SPR(F) across species (length = length(F_vec)). YPR_total Combined YPR(F) across species (length = length(F_vec)). SPR_by_species Named list species-specific SPR(F) vectors. YPR_by_species Named list species-specific YPR(F) vectors. F_spr_total Named numeric vector combined reference points (nearest-grid match), example F40_total F35_total. F_spr_total_constrained Named numeric vector constrained combined reference points multispecies_constraint=\"all_species\"; otherwise NULL. F_spr_by_species Named list species-specific reference points SPR target. diagnostics list elements: Ftarget: fishing mortality value used diagnostics (defaults first target, uses constrained Ftarget available), plus_share: plus-group share table (NULL diagnostics=FALSE), decomp: age-specific decomposition data frame (NULL diagnostics=FALSE).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/run_spr.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Run per-recruit SPR and YPR calculations — run_spr","text":"SPR YPR. species, unfished spawning biomass per recruit (\\(SBPR_{,0}\\)) fished \\(SBPR_i(F)\\) computed survivorship--age, weight--age, maturity--age. SPR species \\(\\) defined \\(SPR_i(F) = SBPR_i(F) / SBPR_{,0}\\). YPR computed using Baranov catch equation biomass units age-specific fishery selectivity. Multispecies complexes. multispecies inputs, species-specific SBPR YPR computed separately using species' life history schedules. Let \\(SBPR_i(F)\\) denote spawning biomass per recruit species \\(\\) fishing mortality \\(F\\), \\(SBPR_i(F)\\) scaled unfished recruitment \\(R_{0,}\\) via initial numbers--age. Complex-level spawning biomass per recruit computed summation, $$   SBPR_{total}(F) = \\sum_i SBPR_i(F), \\qquad SBPR_{total,0} = \\sum_i SBPR_{,0}, $$ combined SPR curve obtained $$   SPR_{total}(F) = SBPR_{total}(F) / SBPR_{total,0}. $$ combined, complex-level SBPR used calculate \"Unconstrained\" multispecies reference points. SPR reference points. Fishing mortality reference points reported : combined complex (F_spr_total), based matching combined SPR curve value spr_targets using grid search approach, species individually (F_spr_by_species). Multispecies constraint. multispecies_constraint = \"all_species\", constrained complex-level reference point target \\(x\\) selected largest value \\(F\\) F_vec every species meets SPR target, $$   SPR_i(F) \\ge x \\;\\; \\text{} , $$ combined curve also meets target. implementation corresponds limiting-species constraint approximately equivalent \\(\\min_i F_{x,}\\) resolution F_vec grid. Diagnostics decomposition outputs. diagnostics = TRUE, output includes: diagnostics$plus_share: fraction total SBPR contributed terminal age (often plus group) F = 0 diagnostic reference F Ftarget, diagnostics$decomp: age-specific df containing survivorship, maturity, selectivity, weight--age, M--age, SBPR contributions, SBPR removed (F0 minus Ftarget) species F = 0 F = Ftarget. diagnostics can visualized plot_spr_decomp().","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/run_spr.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Run per-recruit SPR and YPR calculations — run_spr","text":"","code":"if (FALSE) { # \\dontrun{ # Assume inp is a spr_input() object (single species or multispecies). # Run per-recruit calculations and request decomposition diagnostics. spr_out <- run_spr(inp, diagnostics = TRUE,                   multispecies_constraint = \"all_species\")  # reference points spr_out$F_spr_total spr_out$F_spr_total_constrained spr_out$F_spr_by_species  # Plot SPR(F) curves, complex-level SPR and species-specific SPRs # plot_spr_curves(spr_out, which = \"total\") # plot_spr_curves(spr_out, which = \"species\")  # Decomposition diagnostics plots <- plot_spr_decomp(spr_out, drop_plus_from_plot = TRUE) plots$contrib plots$removed plots$survivorship  # Plus-group diagnostic table (fraction of SBPR in terminal age) spr_out$diagnostics$plus_share } # }"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/scale_color_tier4.html","id":null,"dir":"Reference","previous_headings":"","what":"Tier 4 discrete color scale — scale_color_tier4","title":"Tier 4 discrete color scale — scale_color_tier4","text":"Uses tier4 colorblind-friendly discrete palette (ggthemes colorblind hex codes).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/scale_color_tier4.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tier 4 discrete color scale — scale_color_tier4","text":"","code":"scale_color_tier4(   ...,   reverse = FALSE,   recycle = TRUE,   warn = TRUE,   na.value = \"grey50\" )"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/scale_color_tier4.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Tier 4 discrete color scale — scale_color_tier4","text":"..., reverse, recycle, warn Passed internal palette helper. na.value Color NA values.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/scale_color_tier4.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Tier 4 discrete color scale — scale_color_tier4","text":"ggplot2 scale.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/scale_fill_tier4.html","id":null,"dir":"Reference","previous_headings":"","what":"Tier 4 discrete fill scale — scale_fill_tier4","title":"Tier 4 discrete fill scale — scale_fill_tier4","text":"Uses tier4 colorblind-friendly discrete palette (ggthemes colorblind hex codes).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/scale_fill_tier4.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tier 4 discrete fill scale — scale_fill_tier4","text":"","code":"scale_fill_tier4(   ...,   reverse = FALSE,   recycle = TRUE,   warn = TRUE,   na.value = \"grey50\" )"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/scale_fill_tier4.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Tier 4 discrete fill scale — scale_fill_tier4","text":"..., reverse, recycle, warn Passed internal palette helper. na.value Fill color NA values.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/scale_fill_tier4.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Tier 4 discrete fill scale — scale_fill_tier4","text":"ggplot2 scale.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/selectivity_at_age.html","id":null,"dir":"Reference","previous_headings":"","what":"Fishery selectivity-at-age — selectivity_at_age","title":"Fishery selectivity-at-age — selectivity_at_age","text":"Build selectivity--age vector selectivity specification.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/selectivity_at_age.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Fishery selectivity-at-age — selectivity_at_age","text":"","code":"selectivity_at_age(ages, selectivity, scale_max = TRUE)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/selectivity_at_age.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Fishery selectivity-at-age — selectivity_at_age","text":"ages Numeric vector ages (e.g., a_min:a_max). selectivity named list specifying selectivity. Required element type. type=\"vector\", provide s. type=\"knife_edge\", provide a_c. type=\"logistic\", provide a50 delta. scale_max Logical. TRUE, scales selectivity max(s_a) = 1 possible.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/selectivity_at_age.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Fishery selectivity-at-age — selectivity_at_age","text":"Numeric vector length length(ages) values \\([0,1]\\). selectivity$type == \"fleets\", returned vector effective selectivity--age.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/selectivity_at_age.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Fishery selectivity-at-age — selectivity_at_age","text":"user-facing wrapper around internal helper used spr_input(). useful sensitivity analyses user wants modify fishery selectivity specification existing spr_input() object. returns selectivity bounded \\([0,1]\\) can optionally scale max(s_a) = 1.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/spr_input.html","id":null,"dir":"Reference","previous_headings":"","what":"Construct SPR input object — spr_input","title":"Construct SPR input object — spr_input","text":"Validates expand inputs needed per-recruit SPR/YPR calculations one multiple species.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/spr_input.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Construct SPR input object — spr_input","text":"","code":"spr_input(   ages,   species,   rec_prop = NULL,   R0 = 1,   use_plus_group = TRUE,   scale_selex = TRUE )"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/spr_input.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Construct SPR input object — spr_input","text":"ages Numeric vector ages (e.g., a_min:a_max). species named unnamed list single species specification, named list species multispecies specifications. See details. rec_prop Optional numeric vector recruitment proportions multispecies analyses. Must length number species sum 1. Defaults equal proportions. R0 Numeric scalar recruitment scaling used per-recruit calculations (default=1, equal proportions inputting multiple species). defining R0 multiple species, R0 proportions must vector equal number species sum 1. use_plus_group Logical. TRUE (default), terminal age treated plus group pop dy equations. scale_selex Logical. TRUE (default), scales selectivity max equals 1 possible.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/spr_input.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Construct SPR input object — spr_input","text":"named list expanded, validated inputs running SPR functions: ages, R0, use_plus_group species: named list per-species expanded vectors original specifications rec_prop: recruitment proportions used multispecies calculations","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/spr_input.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Construct SPR input object — spr_input","text":"single-species analysis, provide single species specification via species (can named unnamed). multispecies analyses, provide named list species specifications, element defines life history fishery inputs one species. species specification must include: len_at_age: list type=\"vb\" (Linf, k, t0) type=\"vector\" (L). wt_at_age: list type=\"wl\" (alpha, beta) type=\"vector\" (W). maturity: list type=\"logistic\" (a50, delta) type=\"vector\" (m). selectivity: list type=\"logistic\" (a50, delta), type=\"knife_edge\" (a_c), type=\"vector\" (s). M: numeric scalar vector length length(ages). Rules size--age: wt_at_age$type = \"vector\", provided weight--age vector used directly SPR model. case, len_at_age used determine size--age SPR calculations, message emitted make explicit. len_at_age$type = \"vb\", wt_at_age$type must \"wl\" ensure consistency growth weight conversion.","code":""},{"path":[]},{"path":"https://noaa-afsc.github.io/tier4tools/reference/spr_sensitivity.html","id":null,"dir":"Reference","previous_headings":"","what":"Sensitivity analysis for SPR reference points — spr_sensitivity","title":"Sensitivity analysis for SPR reference points — spr_sensitivity","text":"Runs grid-based sensitivity analysis Tier 4 SPR calculations varying user-defined set influential inputs. Available options include: scalar natural mortality (M), logistic maturity \\(a_{50}\\), knife-edge selectivity \\(a_c\\), (2-species complexes) recruitment proportions.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/spr_sensitivity.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Sensitivity analysis for SPR reference points — spr_sensitivity","text":"","code":"spr_sensitivity(   x_base,   M = NULL,   maturity_a50 = NULL,   selex_ac = NULL,   prop = NULL,   F_vec = seq(0, 0.4, by = 0.002),   spr_targets = c(0.4, 0.35),   multispecies_constraint = c(\"none\", \"all_species\"),   use_constrained_for_yield = TRUE,   digits = 3 )"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/spr_sensitivity.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Sensitivity analysis for SPR reference points — spr_sensitivity","text":"x_base spr_input() object used base scenario. M Numeric vector scalar M values apply. NULL, M varied. maturity_a50 Numeric vector logistic maturity a50 values. NULL, varied. selex_ac Numeric vector knife-edge selectivity a_c values. NULL, varied. prop Numeric vector recruitment proportions 2-species inputs. Interpreted proportion assigned first species names(x_base$species). Ignored 1 species. F_vec Fishing mortality grid passed run_spr(). spr_targets SPR targets passed run_spr() (default c(0.40, 0.35)). multispecies_constraint Passed run_spr() (\"none\" \"all_species\"). use_constrained_for_yield Logical. TRUE constrained F40 exists, evaluate YPR_total constrained F40; otherwise evaluate unconstrained F40. digits Digits used formatting scenario_label.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/spr_sensitivity.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Sensitivity analysis for SPR reference points — spr_sensitivity","text":"df one row per scenario. Columns include: scenario_id Unique integer id. M, maturity_a50, selex_ac, prop Scenario inputs (NA means base). F40_total, F35_total Combined reference points (unconstrained). F40_total_constrained, F35_total_constrained Combined constrained reference points multispecies_constraint=\"all_species\" (otherwise NA). YPR_at_F40 Total yield per recruit evaluated F40 (constrained requested). plus_share_<sp>_F0 Plus-group share F=0 species <sp>. plus_share_<sp>_Ftarget Plus-group share diagnostic Ftarget species. scenario_label Readable label concatenating scenario inputs.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/spr_sensitivity.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Sensitivity analysis for SPR reference points — spr_sensitivity","text":"function modifies base spr_input() object x_base updating one schedules re-running run_spr() scenario. result returned tidy data frame suitable sensitivity plots tables. Important limitation: sensitivity sweep dimensions applied species simultaneously. example, sweeping maturity_a50 sets maturity ogive midpoint value every species input, sweeping selex_ac sets knife-edge \\(a_c\\) every species. Species-specific sensitivity sweeps (varying parameter one species holding others fixed) currently implemented. can varied: M: scalar \\(M\\) applied ages (replaces existing M_at_age). maturity_a50: maturity ogive midpoint \\(a_{50}\\) logistic maturity schedule. selex_ac: knife-edge selectivity age \\(a_c\\). prop: recruitment proportion assigned first species (2-species inputs ). Outputs: returned df includes combined (total) (optionally) constrained SPR reference points (e.g., F40, F35), total YPR evaluated F40, plus group diagnostics separate columns species.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/spr_sensitivity.html","id":"ref-examples","dir":"Reference","previous_headings":"","what":"Examples","title":"Sensitivity analysis for SPR reference points — spr_sensitivity","text":"","code":"if (FALSE) { # \\dontrun{ out <- spr_sensitivity(   x_base,   M = seq(0.03, 0.06, by = 0.005),   maturity_a50 = seq(10, 20, by = 2),   selex_ac = c(8, 10, 12),   prop = seq(0.3, 0.7, by = 0.1),   F_vec = seq(0, 0.4, by = 0.002),   multispecies_constraint = \"all_species\" )  # Heatmap: F40_total across (M, a50) plot_sensitivity_heatmap(out, x = \"M\", y = \"maturity_a50\", fill = \"F40_total\") } # }"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/theme_tier4.html","id":null,"dir":"Reference","previous_headings":"","what":"Tier 4 default ggplot theme — theme_tier4","title":"Tier 4 default ggplot theme — theme_tier4","text":"SAFE-friendly theme minimal gridlines consistent strips/legend.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/theme_tier4.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tier 4 default ggplot theme — theme_tier4","text":"","code":"theme_tier4(base_size = 12)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/theme_tier4.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Tier 4 default ggplot theme — theme_tier4","text":"ggplot2 theme object.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/tier4_palette_cb.html","id":null,"dir":"Reference","previous_headings":"","what":"Tier 4 default colorblind-friendly palette (ggthemes ","title":"Tier 4 default colorblind-friendly palette (ggthemes ","text":"Discrete palette intended species, scenarios, categorical aesthetics.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/tier4_palette_cb.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Tier 4 default colorblind-friendly palette (ggthemes ","text":"","code":"tier4_palette_cb(n, reverse = FALSE, recycle = TRUE, warn = TRUE)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/tier4_palette_cb.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Tier 4 default colorblind-friendly palette (ggthemes ","text":"n Number colors requested. reverse Logical. TRUE, reverse palette order. recycle Logical. TRUE n exceeds palette length, recycle colors (default TRUE). warn Logical. TRUE, warn recycling needed (default TRUE).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/tier4_palette_cb.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Tier 4 default colorblind-friendly palette (ggthemes ","text":"Character vector hex color codes.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/wt_at_age.html","id":null,"dir":"Reference","previous_headings":"","what":"Weight-at-age — wt_at_age","title":"Weight-at-age — wt_at_age","text":"Build weight--age vector weight specification.","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/wt_at_age.html","id":"ref-usage","dir":"Reference","previous_headings":"","what":"Usage","title":"Weight-at-age — wt_at_age","text":"","code":"wt_at_age(ages, wt_at_age, len_at_age = NULL)"},{"path":"https://noaa-afsc.github.io/tier4tools/reference/wt_at_age.html","id":"arguments","dir":"Reference","previous_headings":"","what":"Arguments","title":"Weight-at-age — wt_at_age","text":"ages Numeric vector ages (e.g., a_min:a_max). wt_at_age named list specifying weight--age. Required element type. type=\"wl\", provide alpha beta. type=\"vector\", provide W. len_at_age Optional numeric vector L_a length(ages). Required wt_at_age$type = \"wl\".","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/wt_at_age.html","id":"value","dir":"Reference","previous_headings":"","what":"Value","title":"Weight-at-age — wt_at_age","text":"Numeric vector length length(ages).","code":""},{"path":"https://noaa-afsc.github.io/tier4tools/reference/wt_at_age.html","id":"details","dir":"Reference","previous_headings":"","what":"Details","title":"Weight-at-age — wt_at_age","text":"user-facing wrapper around internal helper used spr_input(). useful sensitivity analyses user wants modify weight specification existing spr_input() object. Use len_at_age wt_at_age$type == \"wl\".","code":""}]
