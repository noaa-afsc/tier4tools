<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot SPR diagnostics, SBPR age decompositions — plot_spr_decomp • tier4tools</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot SPR diagnostics, SBPR age decompositions — plot_spr_decomp"><meta name="description" content="Creates report-ready diagnostic plots of age-specific decompositions of
spawning biomass per recruit (SBPR) under unfished conditions (F = 0) and at
a reference fishing mortality (F = Ftarget) chosen by run_spr()
(default = F40)."><meta property="og:description" content="Creates report-ready diagnostic plots of age-specific decompositions of
spawning biomass per recruit (SBPR) under unfished conditions (F = 0) and at
a reference fishing mortality (F = Ftarget) chosen by run_spr()
(default = F40)."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">tier4tools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/index.html">Articles</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Plot SPR diagnostics, SBPR age decompositions</h1>

      <div class="d-none name"><code>plot_spr_decomp.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Creates report-ready diagnostic plots of age-specific decompositions of
spawning biomass per recruit (SBPR) under unfished conditions (F = 0) and at
a reference fishing mortality (F = Ftarget) chosen by <code><a href="run_spr.html">run_spr()</a></code>
(default = F40).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">plot_spr_decomp</span><span class="op">(</span></span>
<span>  <span class="va">spr_out</span>,</span>
<span>  species <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  drop_plus_from_plot <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  include_plus_caption <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  which_panels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"contrib"</span>, <span class="st">"removed"</span>, <span class="st">"survivorship"</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-spr-out">spr_out<a class="anchor" aria-label="anchor" href="#arg-spr-out"></a></dt>
<dd><p>Output list from <code><a href="run_spr.html">run_spr()</a></code> with <code>diagnostics = TRUE</code>.</p></dd>


<dt id="arg-species">species<a class="anchor" aria-label="anchor" href="#arg-species"></a></dt>
<dd><p>Character vector of species to include. Defaults to all
species in <code>spr_out</code>.</p></dd>


<dt id="arg-drop-plus-from-plot">drop_plus_from_plot<a class="anchor" aria-label="anchor" href="#arg-drop-plus-from-plot"></a></dt>
<dd><p>Logical. If TRUE (default), drops the terminal age from the
plotted panels (only when plus-group diagnostics are available).</p></dd>


<dt id="arg-include-plus-caption">include_plus_caption<a class="anchor" aria-label="anchor" href="#arg-include-plus-caption"></a></dt>
<dd><p>Logical. If TRUE (default), adds the plus-group share
caption to <code>plots$contrib</code> when available.</p></dd>


<dt id="arg-which-panels">which_panels<a class="anchor" aria-label="anchor" href="#arg-which-panels"></a></dt>
<dd><p>Character vector, any of <code>c("contrib", "removed",
"removed_prop", "survivorship")</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A named list of ggplot objects. A compact summary table is attached as
<code>attr(out, "summary")</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Returned object is a named list of ggplot objects:</p><ul><li><p><code>plots$contrib</code>: SBPR contribution by age, comparing F0 vs Ftarget.</p></li>
<li><p><code>plots$removed</code>: SBPR removed by fishing at each age (F0 - Ftarget).</p></li>
<li><p><code>plots$removed_prop</code>: (not shown by default) SBPR removed by
fishing at each age, normalized to the species' total unfished SBPR (F0).
Useful for multispecies applications to compare fractional losses among
species when absolute SBPR magnitudes differ.</p></li>
<li><p><code>plots$survivorship</code>: survivorship by age (per recruit), F0 vs Ftarget.</p></li>
</ul><p>Plus-group treatment can strongly influence SBPR, especially for long-lived
species. When <code>drop_plus_from_plot = TRUE</code> (default), the terminal age
is excluded from the plots to avoid dominance by the plus group, while the
fraction of total SBPR attributable to the terminal age is retained in
<code>spr_out$diagnostics$plus_share</code> and can be appended as a plot caption.</p>
<p><strong>Summary table.</strong> The function also attaches a compact per-species summary table
(unfished SBPR, SBPR at Ftarget, implied SPR at Ftarget, and plus-group shares when available)
as <code>attr(plots, "summary")</code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># \dontrun{</span></span></span>
<span class="r-in"><span><span class="va">spr_out</span> <span class="op">&lt;-</span> <span class="fu"><a href="run_spr.html">run_spr</a></span><span class="op">(</span><span class="va">inp</span>, diagnostics <span class="op">=</span> <span class="cn">TRUE</span>,</span></span>
<span class="r-in"><span>                  multispecies_constraint <span class="op">=</span> <span class="st">"all_species"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Default panels</span></span></span>
<span class="r-in"><span><span class="va">plots</span> <span class="op">&lt;-</span> <span class="fu">plot_spr_decomp</span><span class="op">(</span><span class="va">spr_out</span>, drop_plus_from_plot <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">plots</span><span class="op">$</span><span class="va">contrib</span></span></span>
<span class="r-in"><span><span class="va">plots</span><span class="op">$</span><span class="va">removed</span></span></span>
<span class="r-in"><span><span class="va">plots</span><span class="op">$</span><span class="va">survivorship</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Summary table for optional reporting</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/attr.html" class="external-link">attr</a></span><span class="op">(</span><span class="va">plots</span>, <span class="st">"summary"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span> <span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Jane Sullivan, Kristen Omori.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

